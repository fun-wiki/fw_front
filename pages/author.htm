title = "author"
url = "/author/:slug"
layout = "2_columns"
is_hidden = 0
==
<?php
use fw\Backend\Models\Person as Person;

function onStart()
{
    // Get record
    $this['record'] = Person::where('slug', '=', $this->param('slug'))->first();

    // SEO title
    $this['page_title'] = $this['record']->title;

    // Shema.org properties
    $this['shema_type'] = "person/shema";
    
    // og_meta properties
    $this['og_meta'] = [
      "title" => $this['record']->title,
      "description" => $this['record']->bio,
      "image" => Url::to('storage/app/media',$this['record']->photo),
      "type" => '',
      "url" =>  Request::url(),
    ];

    // Sidebar
    $this['sidebar'] = "person/author/sidebar";
}
?>
==
{##}

{% if record %}
<div class="person">
  <div class="person__info">
    <h1> {{ record.title|person }} </h1>
    <div class="subheader"> {{ record.name }} </div>
    {% if record.persons %}
    <div class="infostring">Псевдонимы:
      {% for person in record.persons %}
        <b>{{ person.title|person }}</b>
      {% endfor %}
    </div>
    {% endif %}
    <div class="infostring">
    {% if record.is_author %}
      Автор
    {% endif %}
    {% if record.is_actor %}
      Актер
    {% endif %}
    {% if record.is_illustrator %}
      Художник
    {% endif %}
    </div>
    <div class="infostring">Дата рождения:
      <b>{{ record.birthdate|ru_date }}</b>
    </div>
    {% if record.deathdata %}
    <div class="infostring">Дата смерти:
      <b>{{ record.deathdata|ru_date }}</b>
    </div>
    {% endif %}
  </div>
  <div class="person__photo">
    <img src="{{ record.photo|media }}" />
  </div>
</div>

<h2>Биография</h2>
{{ record.bio|raw }}

{% endif %}